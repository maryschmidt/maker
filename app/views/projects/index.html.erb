<%= form_tag projects_path, :method => :get do %>
  <p>
    <%# <%= text_field_tag :search, params[:search] %>
    <%# <%= submit_tag "Search", :name => nil %>
  </p>
<% end %>

<%# <%= paginate @projects %>
<% @projects.each do |project| %>
  <% if project.image.exists? %>
    <%= link_to image_tag(project.image.url(:small)), project %>
  <% end %>
<% end %>

<br />

<div class="projects"></div>

<% content_for :javascript do %>
  <script type="text/json">
    {
      "projects": <%== ActiveModel::ArraySerializer.new(@projects).to_json %>
    }
  </script>

  <%= javascript_tag do %>
    $(function() {
      var projectsData = <%== ActiveModel::ArraySerializer.new(@projects).to_json %>
        window.projectsCollection = new Maker.Collections.Projects(projectsData);

      new Maker.Views.ProjectsShow({ projects: projectsCollection, el: $('.projects') }).render();
    });
  <% end %>
<% end %>
